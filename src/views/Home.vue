<template>
  <!--<img src="../assets/logo.jpg">-->
  <!--<HelloWorld msg="Welcome to Your Vue.js App" so="so far"/>-->
  <div class="container">
    <section class="hero">
        <div class="columns" v-if="!items.length">
          <div class="column is-8">
            <div class="card">
              <div class="card-image">
                <figure class="image is-4by3">
                  <img style="background-color: #eee;">
                </figure>
              </div>
              <div class="card-content">
                <div class="media">
                  <div class="media-left">
                    <figure class="image is-48x48">
                      <img src="../assets/logo.jpg" alt="Placeholder image">
                    </figure>
                  </div>
                  <div class="media-left">
                    <a href="https://www.facebook.com/913634415380449"></a>
                  </div>
                  <div class="media-content">
                    <p class="title is-4"></p>
                    <p class="subtitle is-6"></p>
                  </div>
                </div>

                <div class="content"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="columns" v-for="item in items" :key="item.id">
          <div class="column is-8">
            <div class="card">
              <div class="card-image" v-if="item.img">
                <figure class="image is-4by3">
                  <img v-bind:src="item.img" alt="Placeholder image">
                </figure>
              </div>
              <div class="card-image" v-if="item.imgs" >
                <carousel-3d>
                  <slide v-for="(img, index) in item.imgs" :key="img.id" :index="index">
                    <template>
                      <img :src="img.img">
                    </template>
                  </slide>
                </carousel-3d>
              </div>
              <div class="card-image" v-if="item.video">
                <div class="facebook-responsive">
                  <iframe :src="'https://www.facebook.com/plugins/video.php?href=' + item.video" style="border:none;overflow:hidden" data-width="100%" scrolling="no" frameborder="0" allowTransparency="true" allowFullScreen="true"></iframe>
                </div>
              </div>
              <div class="card-content">
                <div class="media">
                  <div class="media-left">
                    <figure class="image is-48x48">
                      <img src="../assets/logo.jpg" alt="Placeholder image">
                    </figure>
                  </div>
                  <div class="media-left">
                    <a :href="item.from.link"><strong>{{item.from.name}}</strong></a>
                    <div v-if="item.place">
                      åœ¨ <a :href="item.place.link">{{item.place.name}}</a>
                    </div>
                    <div>
                      <span>{{ item.createdTime | moment("MM/DD hh:mm:ss") }}</span>
                    </div>
                  </div>

                  <div class="media-content">
                    <p class="title is-4">{{item.title}}</p>
                    <p class="subtitle is-6">{{item.subtitle}}</p>
                  </div>
                </div>

              <div class="content" style="word-wrap:break-word">{{item.content}}</div>
            </div>
          </div>
        </div>

          <!--<div class="column is-4">
            <div class="card">
              <div class="card-image">
                <figure class="image is-4by3">
                  <img src="../assets/card2.jpg" alt="Placeholder image">
                </figure>
              </div>
              <div class="card-content">
                <div class="media">
                  <div class="media-left">
                    <figure class="image is-48x48">
                      <img src="../assets/logo.jpg" alt="Placeholder image">
                    </figure>
                  </div>
                  <div class="media-content">
                    <p class="title is-4">é–‹èª²è³‡è¨Š</p>
                    <p class="subtitle is-6">#é–‹èª²è³‡è¨Š</p>
                  </div>
                </div>

                <div class="content">
                  å¤§å®¶ä¹…ç­‰äº† ! !
                  ã€è—å¯Œç©ºé–“ã€‘è¨­å‚™éƒ½å·²ç¶“æº–å‚™å¦¥ç•¶ï¼Œ
                  7/21è™Ÿé–‹å¹•å¾Œï¼Œå³å°‡è¦é–‹å§‹é–‹èª²äº†ï¼ğŸ˜
                  é€™æ¬¡ç‚ºä½ é‚€è«‹åˆ°Breakingèˆé½¡åå¹´ä»¥ä¸Šï¼Œ
                  YOUTUBEä¸Šçš„è¡—èˆé »é“(å°å†°è¡—èˆæ•™å­¸)
                  æœ‰æ•¸åè¬ç¶²å‹è§€çœ‹ï¼Œ
                  é‚„æ›¾å—é‚€åˆ°æ¾³é–€æ•™å­¸å…©ä½å°æœ‹å‹çš„æ’èˆï¼Œ
                  ã€å°å†°è€å¸«ã€‘ è¡—é ­è—äºº-å°å†°/ Street artist- Shaobinï¼Œä»¥åŠ
                  ã€æ»·è›‹è€å¸«ã€‘ åƒä¸€é¡†å°æ»·è›‹çš„æ»·è›‹ Lawrence ï¼Œè®“ä½ å…©å€‹ç¦®æ‹œç·´å¥½ç·´æ»¿ï¼
                </div>
              </div>
            </div>
          </div>
          <div class="column is-4">
            <div class="card">
              <div class="card-image">
                <figure class="image is-4by3">
                  <img src="../assets/card3.jpg" alt="Placeholder image">
                </figure>
              </div>
              <div class="card-content">
                <div class="media">
                  <div class="media-left">
                    <figure class="image is-48x48">
                      <img src="../assets/logo.jpg" alt="Placeholder image">
                    </figure>
                  </div>
                  <div class="media-content">
                    <p class="title is-4">èˆ‡å¤©å‰µå¨›æ¨‚æ”œæ‰‹åˆä½œ</p>
                    <p class="subtitle is-6">#èˆ‡å¤©å‰µå¨›æ¨‚æ”œæ‰‹åˆä½œ</p>
                  </div>
                </div>

                <div class="content">
                  è—å¯Œç”·å­©å‡ºå‹•äº†ï¼Œ
                  é€™æ¬¡å†èˆ‡å¤©å‰µå¨›æ¨‚æ”œæ‰‹åˆä½œï¼Œ
                  ä»¥å‹•æ…‹çš„èˆè¹ˆè¡¨æ¼”çµåˆäº†éœæ…‹çš„ç¹ªç•«å¡—é´‰ï¼Œ
                  å‹•æ…‹èˆ‡éœæ…‹çš„è¦–è¦ºè¡æ“Šï¼Œ
                  èˆè¹ˆèˆ‡å¡—é´‰åˆä½µå‡ºè±å¯Œå…§å®¹çš„æ„Ÿå®˜é«”é©—ï¼ï¼

                  æš‘å‡æ´»å‹•å­£ç¯€çš„åˆ°ä¾†ï¼
                  è‹¥æœ‰ç›¸é—œéœ€æ±‚ï¼Œæ•¬è«‹æŠŠæ¡ğŸ˜†
                </div>
              </div>
            </div>
          </div>
          <div class="column is-4">
            <div class="card">
              <div class="card-image">
                <figure class="image is-4by3">
                  <img src="../assets/card4.jpg" alt="Placeholder image">
                </figure>
              </div>
              <div class="card-content">
                <div class="media">
                  <div class="media-left">
                    <figure class="image is-48x48">
                      <img src="../assets/logo.jpg" alt="Placeholder image">
                    </figure>
                  </div>
                  <div class="media-content">
                    <p class="title is-4">è—å¯Œå¥³å­©</p>
                    <p class="subtitle is-6">#è—å¯Œå¥³å­©</p>
                  </div>
                </div>

                <div class="content">
                  å¤§å®¶æ‡‰è©²å·²ç¶“æº–å‚™ç¡è¦ºäº†å§ï¼
                  åœ¨å·¥ä½œå®¤è£¡ï¼Œæˆ‘å€‘çš„å¥³å­©é‚„åœ¨è¾›è‹¦çš„æ’ç·´ä¸­
                  å¤§å®¶å¹³å¸¸éƒ½å¾ˆå¿™ï¼Œåªèƒ½åˆ©ç”¨åŠå¤œè¾›è‹¦çš„ç·´ç¿’

                  å¸Œæœ›æ˜å¤©è¡¨æ¼”å¯ä»¥é †é †åˆ©åˆ©ï¼Œè¾›è‹¦äº†ï¼è—å¯Œå¥³å­©ï½
                </div>
              </div>
            </div>
          </div>-->
        </div>

        <div><a href="https://www.facebook.com/YIFU2017" target="_blank">More...</a></div>
    </section>
  </div>
</template>

<style>
  .facebook-responsive {
    overflow:hidden;
    padding-bottom:56.25%;
    position:relative;
    height:0;
  }

  .facebook-responsive iframe {
    left:0;
    top:0;
    height:100%;
    width:100%;
    position:absolute;
  }
</style>

<script>
  import Vue from 'vue'
  import axios from 'axios'
  import VueAxios from 'vue-axios'
  import VueLogger from 'vuejs-logger';
  const isProduction = process.env.NODE_ENV === 'production';

  const options = {
    isEnabled: true,
    logLevel : isProduction ? 'error' : 'debug',
    stringifyArguments : false,
    showLogLevel : true,
    showMethodName : true,
    separator: '|',
    showConsoleColors: true
  };

  Vue.use(VueLogger, options);
  Vue.use(VueAxios, axios);

  export default {
    name: 'app1',
    data: function() {
      let items = [
        //{title: 'é–‹å¹•å¼æ´»å‹•', subtitle: '#é–‹å¹•å¼æ´»å‹•', img: '/yifu/img/card1.681ff81f.jpg', content: 'æ„Ÿè¬æ˜¨å¤©å„ä½å˜‰è³“è’è‡¨æˆ‘å€‘ã€ŒYIFU è—å¯Œæ¼”è—æœ‰é™å…¬å¸ã€é–‹å¹•å¼æ´»å‹•ğŸ¡ æ„Ÿè¬æ‰€æœ‰è—å¯Œçš„å·¥ä½œäººå“¡å¹«å¿™ ä¸€èµ·å®Œæˆå°è€Œç²¾ç¾å‡ºè‰²çš„é–‹å¹•æœƒ æº–å‚™äº†å„ç¨®è±ªè¯é£Ÿç‰© é£²æ–™é…’æ°´ é‚„æœ‰æŠ½ç å°ç·¨ä¹Ÿçœ‹äº†å¾ˆç¾¨æ…• ä¸åªæ´»å‹•ç©çš„å¾ˆé–‹å¿ƒ èˆ‡å„æ–¹è€é—†äº¤æµæ”¶ç²ä¹Ÿå¾ˆè±å¯Œ å°±ä¾†è£œä¸€ä¸‹æ˜¨å¤©çš„æ´»å‹•ç…§ç‰‡çµ¦å¤§å®¶æ¬£è³å•¦~'}
      ];
      axios.get('https://graph.facebook.com/v3.1/913634415380449/feed?fields=from,attachments,message,created_time,place&access_token=EAAC1ZBttoruEBAMGeZB59joIJTegFd8LoAsTBy4KA7c0EHsoWwwP9SbLhgETKizIGfuxdZBMZCCpKr14dFjvg9ZCJvXkZAxt9rNZCzVmxFgkUBRiIhQ8S7PZCUT4VMvBQWmSQrgVlMnoZBwXKjENbQUvAk0TrrpsOphM4uCeAMlpkPgZDZD').then((response) => {
        let self = this;
        response.data.data.forEach(function(element) {
          self.$log.info(element);

          let data = {
            from: {
              link: `https://www.facebook.com/${element.from.id}`,
              name: element.from.name
            },
            content: element.message,
            createdTime: element.created_time
          };
          if(element.attachments) {
            let aa = element.attachments.data[0];
            if(aa.subattachments) {
              //data.img = aa.subattachments.data[0].media.image.src
              data.imgs = [];
              aa.subattachments.data.forEach(function (datum) {
                data.imgs.push({
                  id: datum.target.id,
                  img: datum.media.image.src
                });
              });
            } else if (element.attachments.data[0].type === 'video_autoplay') {
              data.video = element.attachments.data[0].url
            } else {
              data.img = element.attachments.data[0].media.image.src;
            }

          }
          if(element.place) {
            data.place = {
              name: element.place.name,
              link: `https://www.facebook.com/${element.place.id}`
            }
          }
          items.push(data);
        });
      });
      return {
        items: items,
        isLoading: true
      }
    }
  }
</script>